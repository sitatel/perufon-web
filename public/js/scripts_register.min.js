var Register={create:function(a){a.preventDefault();var b=jQuery(this),c=b.serialize(),d=b.find(":input"),e=jQuery("#ani").val()+"-"+jQuery("#mes").val()+"-"+jQuery("#dia").val();jQuery.ajax({data:c+"&fecha_nacimiento="+e,type:"post",dataType:"json",url:"https://service.perufon.com/register",beforeSend:function(){d.prop("disabled",!0),jQuery("#register-message-result").html(""),jQuery("#register-message-result").removeClass("success-message error-message")}}).done(function(a){a.load?(jQuery("#register-message-result").html(a.message),jQuery("#register-message-result").removeClass("success-message error-message").addClass("success-message"),window.parent.location.href="http://www.perufon.com/confirmacion.html"):(jQuery("#register-message-result").html(a.error_message),jQuery("#register-message-result").removeClass("success-message error-message").addClass("error-message"))}).fail().always(function(){d.prop("disabled",!1)})},resendCall:function(a){a.preventDefault();var b=jQuery(this),c="do=recall&token="+$('input[name="token"]').val(),d=b.find(":input");jQuery.ajax({type:"get",dataType:"json",url:"https://service.perufon.com/register/recall/"+$('input[name="token"]').val(),data:c,beforeSend:function(){d.prop("disabled",!0)}}).done(function(a){a.load?(jQuery("#call-message-result").html(a.message),jQuery("#call-message-result").removeClass("success-message error-message").addClass("success-message")):(jQuery("#call-message-result").html(a.message),jQuery("#call-message-result").removeClass("success-message error-message").addClass("error-message"))}).fail(function(){}).always(function(){d.prop("disabled",!1)})},confirmCall:function(a){a.preventDefault();var b=jQuery(this),c=b.serialize(),d=b.find(":input");jQuery.ajax({type:"get",dataType:"json",url:"https://service.perufon.com/register/"+$('input[name="token"]').val()+"/"+$("input[name=cod_call]").val(),data:c,beforeSend:function(){d.prop("disabled"),jQuery("#call-message-result").html(""),jQuery("#call-message-result").removeClass("success-message error-message")}}).done(function(a){a.load?(jQuery("#call-message-result").html(a.message),jQuery("#call-message-result").removeClass("success-message error-message").addClass("success-message")):(jQuery("#call-message-result").html(a.message),jQuery("#call-message-result").removeClass("success-message error-message").addClass("error-message"))}).fail(function(){}).always(function(){d.prop("disabled",!1)})},resendCode:function(a){a.preventDefault()}};jQuery(document).ready(function(){function a(a,b,c){return c=c||"0",a+="",a.length>=b?a:new Array(b-a.length+1).join(c)+a}jQuery("#recod1").on("click",Register.resendCall),jQuery("#frm-register").on("submit",Register.create),jQuery("#frm-validate-code").on("submit",Register.confirmCall),ini=1,fin=31;for(var b="";ini<=fin;)pini=a(ini,2,"0"),b=b+'<option value="'+pini+'">'+pini+"</option>",ini+=1;ini=1,fin=12;for(var c="";ini<=fin;)pini=a(ini,2,"0"),c=c+'<option value="'+pini+'">'+pini+"</option>",ini+=1;var d=new Date,e=1*d.getFullYear();for(ini=0,fin=125;ini<=fin;)ani=ani+'<option value="'+(e-ini)+'">'+(e-ini)+"</option>",ini+=1;jQuery("#dia").append(b),jQuery("#mes").append(c),jQuery("#ani").append(ani)});